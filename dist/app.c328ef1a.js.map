{"version":3,"sources":["app.js"],"names":["ajax","XMLHttpRequest","newsUrl","contentUrl","store","currentPage","pageSize","newsFeed","lastPage","root","document","getElementById","getData","url","open","send","JSON","parse","response","initReadState","feeds","i","length","read","count","news","Math","ceil","newsList","template","id","title","comments_count","user","points","time_ago","push","replace","join","innerHTML","newsContent","location","hash","slice","map","Number","content","comments","makeComment","commentStr","level","router","routePath","startsWith","window","addEventListener"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["const ajax = new XMLHttpRequest\r\n\r\nconst newsUrl = `https://api.hnpwa.com/v0/news/1.json`\r\nconst contentUrl = `https://api.hnpwa.com/v0/item/@id.json`\r\nconst store = {\r\n  currentPage: 1,\r\n  pageSize: 5,\r\n  newsFeed: [],\r\n  lastPage: 1\r\n}\r\nconst root = document.getElementById(\"root\")\r\n//---------------------------------------------------\r\n\r\n\r\nconst getData = (url) => {\r\n  ajax.open(\"GET\", url, false)\r\n  ajax.send()\r\n  return JSON.parse(ajax.response)\r\n}\r\n\r\nconst initReadState = (feeds) => {\r\n  let i = 0\r\n  for (i = 0; i < feeds.length; i++) {\r\n    feeds[i].read = false\r\n  }\r\n  feeds.count = i\r\n  return feeds\r\n}\r\n\r\nconst newsFeed = () => {\r\n  let news = store.newsFeed\r\n\r\n  if (news.length == 0) {\r\n    news = store.newsFeed = initReadState(getData(newsUrl))\r\n    store.lastPage = Math.ceil(news.count / store.pageSize)\r\n  }\r\n\r\n  const newsList = []\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen\">\r\n      <div class=\"bg-white text-xl\">\r\n        <div class=\"mx-auto px-4\">\r\n          <div class=\"flex justify-between items-center py-6\">\r\n            <div class=\"flex justify-start\">\r\n              <h1 class=\"font-extrabold\">Hacker News</h1>\r\n            </div>\r\n            <div class=\"items-center justify-end\">\r\n              <a href=\"#/page/@prev\" class=\"text-gray-500\">\r\n                Previous\r\n              </a>\r\n              <a href=\"#/page/@next\" class=\"text-gray-500 ml-4\">\r\n                Next\r\n              </a>\r\n            </div>\r\n          </div> \r\n        </div>\r\n      </div>\r\n      <div class=\"p-4 text-2xl text-gray-700\">\r\n        @news       \r\n      </div>\r\n    </div>\r\n  `\r\n\r\n  for (let i = (store.currentPage - 1) * store.pageSize; i < (store.currentPage) * store.pageSize; i++) {\r\n    const { id, title, comments_count, user, points, time_ago, read } = news[i]\r\n    newsList.push(`\r\n      <div class=\"read p-6 ${read ? 'bg-gray-500' : 'bg-white'} mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\r\n        <div class=\"flex\">\r\n          <div class=\"flex-auto\">\r\n            <a href=\"#/show/${id}\">${title}</a>  \r\n          </div>\r\n          <div class=\"text-center text-sm\">\r\n            <div class=\"w-10 text-white bg-green-300 rounded-lg px-0 py-2\">${comments_count}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex mt-3\">\r\n          <div class=\"grid grid-cols-3 text-sm text-gray-500\">\r\n            <div><i class=\"fas fa-user mr-1\"></i>${user}</div>\r\n            <div><i class=\"fas fa-heart mr-1\"></i>${points}</div>\r\n            <div><i class=\"far fa-clock mr-1\"></i>${time_ago}</div>\r\n          </div>  \r\n        </div>\r\n      </div>    \r\n    `)\r\n  }\r\n\r\n  template = template.replace('@news', newsList.join(''))\r\n  template = template.replace('@prev', store.currentPage > 1 ? store.currentPage - 1 : 1)\r\n  template = template.replace('@next', store.currentPage < store.lastPage ? store.currentPage + 1 : store.lastPage)\r\n\r\n  root.innerHTML = template\r\n}\r\n\r\nconst newsContent = () => {\r\n  const id = location.hash.slice(7)\r\n  store.newsFeed.map(news => {\r\n    if (news.id == Number(id)) {\r\n      news.read = true\r\n    }\r\n  })\r\n\r\n  const { title, content, comments } = getData(contentUrl.replace(\"@id\", id))\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen pb-8\">\r\n      <div class=\"bg-white text-xl\">\r\n        <div class=\"mx-auto px-4\">\r\n          <div class=\"flex justify-between items-center py-6\">\r\n            <div class=\"flex justify-start\">\r\n              <a href=\"#/page/${store.currentPage}\" class=\"font-extrabold\">Hacker News</a>\r\n            </div>\r\n            <div class=\"items-center justify-end\">\r\n              <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\r\n                <i class=\"fa fa-times\"></i>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"h-full border rounded-xl bg-white m-6 p-4 \">\r\n        <h2>${title}</h2>\r\n        <div class=\"text-gray-400 h-20\">\r\n          ${content}\r\n        </div>\r\n        @comments\r\n      </div>\r\n    </div>\r\n  `\r\n  const makeComment = (comments) => {\r\n    const commentStr = []\r\n\r\n    for (let i = 0; i < comments.length; i++) {\r\n      const { user, content, time_ago, level } = comments[i]\r\n      commentStr.push(`\r\n        <div style=\"padding-left: ${level * 20}px;\" class=\"mt-4\">\r\n          <div class=\"text-gray-400\">\r\n            <i class=\"fa fa-sort-up mr-2\"></i>\r\n            <strong>${user}</strong> ${time_ago}\r\n          </div>\r\n          <p class=\"text-gray-700\">${content}</p>\r\n        </div>\r\n      `)\r\n\r\n      if (comments[i].comments) {\r\n        // 재귀함수를 통해 대댓글을 만들어준다.\r\n        commentStr.push(makeComment(comments[i].comments))\r\n      }\r\n    }\r\n\r\n    return commentStr.join('')\r\n  }\r\n  root.innerHTML = template.replace('@comments', makeComment(comments))\r\n}\r\n\r\nconst router = () => {\r\n  const routePath = location.hash\r\n  if (routePath == '' || routePath == '#') {\r\n    newsFeed()\r\n  } else if (routePath.startsWith('#/page/')) {\r\n    store.currentPage = Number(routePath.slice(7))\r\n    newsFeed()\r\n  } else if (routePath.startsWith('#/show/')) {\r\n    newsContent()\r\n  }\r\n}\r\n\r\nnewsFeed()\r\nwindow.addEventListener(\"hashchange\", router)"]}